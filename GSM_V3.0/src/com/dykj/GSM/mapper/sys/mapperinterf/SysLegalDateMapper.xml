<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dykj.GSM.mapper.sys.mapperinterf.SysLegalDateMapper" >
  <resultMap id="sysLegalDateResult" type="SysLegalDate" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="CODE" property="code" jdbcType="VARCHAR" />
    <result column="CREATE_DATE" property="createDate" jdbcType="VARCHAR" />
    <result column="CREATE_BY" property="createBy" jdbcType="VARCHAR" />
    <result column="FLAG_DEL" property="flagDel" jdbcType="CHAR" />
    <result column="FLAG_DISPLAY" property="flagDisplay" jdbcType="CHAR" />
    <result column="SORT" property="sort" jdbcType="DECIMAL" />
    <result column="REMARK" property="remark" jdbcType="VARCHAR" />
    <result column="YEAR" property="year" jdbcType="DECIMAL" />
    <result column="LEGAL_DAY" property="legalDay" jdbcType="VARCHAR" />
    <result column="MONTH" property="month" jdbcType="DECIMAL" />
    <result column="WORK_DAY" property="workDay" jdbcType="VARCHAR" />
    <result column="LEGAL_COUNT" property="legalCount" jdbcType="DECIMAL" />
    <result column="WORK_COUNT" property="workCount" jdbcType="DECIMAL" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    CODE, CREATE_DATE, CREATE_BY, FLAG_DEL, FLAG_DISPLAY, SORT, REMARK, YEAR, LEGAL_DAY, 
    MONTH, WORK_DAY, LEGAL_COUNT, WORK_COUNT
  </sql>
 
  <insert id="insert" parameterType="SysLegalDate" >
    <selectKey keyProperty="code" resultType="String" order="BEFORE">
        SELECT SYS_GUID() FROM DUAL
      </selectKey>
    insert into SYS_LEGAL_DATE (CODE, CREATE_DATE, CREATE_BY, 
      FLAG_DEL, FLAG_DISPLAY, SORT, 
      REMARK, YEAR, LEGAL_DAY, 
      MONTH, WORK_DAY, LEGAL_COUNT, 
      WORK_COUNT)
    values (#{code,jdbcType=VARCHAR}, #{createDate,jdbcType=VARCHAR}, #{createBy,jdbcType=VARCHAR}, 
      #{flagDel,jdbcType=CHAR}, #{flagDisplay,jdbcType=CHAR}, #{sort,jdbcType=DECIMAL}, 
      #{remark,jdbcType=VARCHAR}, #{year,jdbcType=DECIMAL}, #{legalDay,jdbcType=VARCHAR}, 
      #{month,jdbcType=DECIMAL}, #{workDay,jdbcType=VARCHAR}, #{legalCount,jdbcType=DECIMAL}, 
      #{workCount,jdbcType=DECIMAL})
  </insert>
 
  <!-- 更新实体对象   -->
  <update id="update" parameterType="java.util.Map" >
    update SYS_LEGAL_DATE
    <set >
      <if test="createDate != null" >
        CREATE_DATE = #{createDate,jdbcType=VARCHAR},
      </if>
      <if test="createBy != null" >
        CREATE_BY = #{createBy,jdbcType=VARCHAR},
      </if>
      <if test="legalDay != null" >
        LEGAL_DAY = #{legalDay,jdbcType=VARCHAR},
      </if>
      <if test="workDay != null" >
        WORK_DAY = #{workDay,jdbcType=VARCHAR},
      </if>
      <if test="legalCount != null" >
        LEGAL_COUNT = #{legalCount,jdbcType=DECIMAL},
      </if>
      <if test="workCount != null" >
        WORK_COUNT = #{workCount,jdbcType=DECIMAL},
      </if>
    </set>
    where CODE = #{code,jdbcType=VARCHAR}
  </update>
  <!-- <update id="update" parameterType="SysLegalDate" >
    
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
   
    update SYS_LEGAL_DATE
    set CREATE_DATE = #{createDate,jdbcType=VARCHAR},
      CREATE_BY = #{createBy,jdbcType=VARCHAR},
      FLAG_DEL = #{flagDel,jdbcType=CHAR},
      FLAG_DISPLAY = #{flagDisplay,jdbcType=CHAR},
      SORT = #{sort,jdbcType=DECIMAL},
      REMARK = #{remark,jdbcType=VARCHAR},
      YEAR = #{year,jdbcType=DECIMAL},
      LEGAL_DAY = #{legalDay,jdbcType=VARCHAR},
      MONTH = #{month,jdbcType=DECIMAL},
      WORK_DAY = #{workDay,jdbcType=VARCHAR},
      LEGAL_COUNT = #{legalCount,jdbcType=DECIMAL},
      WORK_COUNT = #{workCount,jdbcType=DECIMAL}
    where CODE = #{code,jdbcType=VARCHAR}
  </update> -->   
    <!-- ===========================================================-->
     <!-- 根据主键查询实体对象  -->
    <select id="queryByYearAndMonth" parameterType="SysLegalDate" resultMap="sysLegalDateResult">
        SELECT * FROM SYS_LEGAL_DATE WHERE FLAG_DEL != 1 AND YEAR=#{year} AND MONTH=#{month}
    </select>
    <!-- 为取得due-date,需要获得 本年次，本月次之后的数据 -->
    <select id="queryLegalDateAfterNow" parameterType="SysLegalDate" resultMap="sysLegalDateResult">
       SELECT * FROM SYS_LEGAL_DATE WHERE FLAG_DEL != 1 and year=#{year} and month&gt;=#{month} or year&gt;#{year} order by year,month
    </select>
    
</mapper>